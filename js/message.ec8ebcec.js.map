{"version":3,"sources":["webpack:///./src/views/MessageListAll.vue","webpack:///./src/views/MessageListAll.vue?ae7c","webpack:///./src/views/MessageListAll.vue?c08e","webpack:///./src/views/MessageListAll.vue?891f"],"names":["class","for","href","prefixCls","type","id","hideRead","filterList","index","content","status","time","title","dataFormate","totalCount","displayNum","DISPLAY_NYM","currentPage","updateCurrentPage","name","setup","useDesign","lists","value","filter","item","page","fetchMsgList","limit","result","list","total","console","error","render","__scopeId"],"mappings":"oOAUOA,MAAM,S,EAIL,eAAY,UAAR,OAAG,G,EAGoD,eAEtD,SAF6DC,IAAI,SAC/D,QAAI,G,EAGT,eAAiC,KAA9BC,KAAK,gBAAe,UAAM,G,GAOpBF,MAAM,O,GACHA,MAAM,Q,GACNA,MAAM,Q,GAQjBA,MAAM,4B,0IA5Bf,eAoCM,MApCN,EAoCM,CAnCJ,eAAU,GACV,eAiCM,OAjCAA,MAAK,UAAK,EAAAG,UAAL,Y,CACT,eAUM,OAVAH,MAAK,UAAK,EAAAG,UAAL,oB,CACT,EACA,eAOM,OAPAH,MAAK,UAAK,EAAAG,UAAL,qB,CACT,eAIC,a,eAHC,eAAuD,SAAhDC,KAAK,WAAWC,GAAG,Q,qDAAiB,EAAAC,SAAQ,K,mBAAR,EAAAA,YAAY,IAIzD,G,OAGJ,eAYM,OAZAN,MAAK,UAAK,EAAAG,UAAL,iB,CACT,eAUK,Y,mBATH,eAQW,2BARmD,EAAAI,YAAU,WAApBC,GAAK,IAArCC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,OAAQC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,M,wBACzC,eAMK,M,IAPyEJ,EACzER,MAAK,SAAaU,I,CACrB,eAGM,MAHN,EAGM,CAFJ,eAAqC,OAArC,EAAqC,eAAfE,GAAK,GAC3B,eAAwD,OAAxD,EAAwD,eAAlC,EAAAC,YAAYF,EAAI,aAExC,eAAoB,wBAAdF,GAAO,I,kBAMrB,eAMQ,MANR,EAMQ,CALL,eAKD,GAJGK,WAAY,EAAAA,WACZC,WAAY,EAAAC,YACZC,YAAa,EACb,uBAAoB,EAAAC,mB,sJCtCvBF,EAAc,GACL,iBAAgB,CAC7BG,KAAM,eACNC,MAF6B,WAExB,MACmB,OAAAC,EAAA,MAAU,WAAxBlB,EADL,EACKA,UACFG,EAAW,gBAAI,GACfQ,EAAa,eAAI,GACjBQ,EAAQ,eAAI,IACZf,EAAa,gBAAS,WAC1B,OAAKD,EAASiB,MACPD,EAAMC,MAAMC,QAAO,SAACC,GAAD,OAAgBA,EAAKf,UADnBY,EAAMC,SAGpC,SAASL,EAAkBQ,GACzBC,EAAaD,GAVZ,SAoBYC,EApBX,GAAD,6FAoBH,WAA4BD,GAA5B,gHAEyB,eAAc,CAAEA,OAAME,MAAOZ,IAFtD,OAEUa,EAFV,OAGIP,EAAMC,MAAQM,EAAOC,KACrBhB,EAAWS,MAAQM,EAAOE,MAJ9B,mDAMIC,QAAQC,MAAR,MANJ,yDApBG,wBAgCH,OAHA,gBAAU,WACRN,EAAa,MAER,CACLxB,YACAe,oBACAZ,WACAU,cACAF,aACAP,aACAM,YAAA,W,UC1CR,EAAOqB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,kCCRf","file":"js/message.ec8ebcec.js","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2021-03-08 15:13:10\n * @LastEditTime: 2021-03-17 10:38:53\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /fronted_v2/src/components/MessageListAll.vue\n-->\n\n<template>\n  <div class=\"pb-20\">\n    <Header />\n    <div :class=\"`${prefixCls}__lists`\">\n      <div :class=\"`${prefixCls}__lists--header`\">\n        <h3>站内信</h3>\n        <div :class=\"`${prefixCls}__lists--options`\">\n          <span>\n            <input type=\"checkbox\" id=\"hide1\" v-model=\"hideRead\" /><label for=\"hide1\"\n              >隐藏已读</label\n            ></span\n          >\n          <a href=\"javascript:;\">全部标为已读</a>\n        </div>\n      </div>\n      <div :class=\"`${prefixCls}__lists--con`\">\n        <ul>\n          <template v-for=\"({ content, status, time, title }, index) in filterList\" :key=\"index\">\n            <li :class=\"{ reading: status }\">\n              <div class=\"top\">\n                <span class=\"type\">{{ title }}</span>\n                <span class=\"time\">{{ dataFormate(time, 'ymd') }}</span>\n              </div>\n              <p>{{ content }}</p>\n            </li>\n          </template>\n        </ul>\n      </div>\n\n      <div class=\"mt-5 flex justify-center\"\n        ><PageNavigation\n          :totalCount=\"totalCount\"\n          :displayNum=\"DISPLAY_NYM\"\n          :currentPage=\"0\"\n          @update:currentPage=\"updateCurrentPage\"\n      /></div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\n  import { defineComponent, onMounted, ref, computed } from 'vue';\n  import { useDesign } from '@/hooks/useDesign';\n  import { getMsgListApi, setMsgReadApi } from '@/api/trade/msssage';\n  import { dataFormate } from '@/helper/utils';\n  const DISPLAY_NYM = 10;\n  export default defineComponent({\n    name: 'messageLists',\n    setup() {\n      const { prefixCls } = useDesign('message');\n      const hideRead = ref(false);\n      const totalCount = ref(0);\n      const lists = ref([]);\n      const filterList = computed(() => {\n        if (!hideRead.value) return lists.value;\n        return lists.value.filter((item: any) => !item.status);\n      });\n      function updateCurrentPage(page) {\n        fetchMsgList(page);\n      }\n      async function handleRead(msgId) {\n        try {\n          const result = await setMsgReadApi({ mid: msgId });\n          lists.value.map((item: any) => (item.status = 1));\n        } catch (error) {\n          console.error(error);\n        }\n      }\n      async function fetchMsgList(page) {\n        try {\n          const result = await getMsgListApi({ page, limit: DISPLAY_NYM });\n          lists.value = result.list;\n          totalCount.value = result.total;\n        } catch (error) {\n          console.error(error);\n        }\n      }\n      onMounted(() => {\n        fetchMsgList(0);\n      });\n      return {\n        prefixCls,\n        updateCurrentPage,\n        hideRead,\n        DISPLAY_NYM,\n        totalCount,\n        filterList,\n        dataFormate,\n      };\n    },\n  });\n</script>\n<style lang=\"less\" scoped>\n  @prefix-cls:~ '@{namespace}-message';\n  .@{prefix-cls} {\n    &__lists {\n      width: 1200px;\n      padding: 32px 60px 52px 60px;\n      margin: 20px auto 0 auto;\n      @apply bg-white shadow-sm rounded text-sm z-30;\n      li {\n        padding-bottom: 16px;\n        margin-bottom: 16px;\n        @apply border-b border-gray-410;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n      &--header {\n        @apply flex flex-row justify-between items-center border-b border-gray-410 pb-2;\n        h3 {\n          @apply text-lg;\n        }\n      }\n      &--options {\n        height: 22px;\n        @apply flex flex-row justify-between items-center;\n        span {\n          input {\n            @apply mr-2;\n          }\n          @apply flex flex-row items-center mb-0 leading-none text-xs text-gray-470 mr-9;\n        }\n        a {\n          @apply text-xs leading-none;\n        }\n      }\n      &--con {\n        margin-top: 20px;\n        padding-bottom: 10px;\n        .reading {\n          .top {\n            .type {\n              &:before {\n                display: none;\n              }\n              @apply text-gray-470;\n            }\n          }\n          p {\n            @apply text-gray-460;\n          }\n        }\n\n        .top {\n          @apply flex flex-row justify-between;\n          .type {\n            @apply text-sm text-gray-470 leading-none relative;\n            &:before {\n              width: 6px;\n              height: 6px;\n              content: '';\n              top: 4px;\n              left: -12px;\n              @apply absolute rounded-full bg-red-420;\n            }\n          }\n          .time {\n            @apply text-gray-460 text-xs leading-none;\n          }\n        }\n        p {\n          @apply text-xs leading-4 text-gray-440 mt-2;\n          .ellipsis-multiple(2);\n        }\n      }\n      &--footer {\n        @apply flex flex-row justify-between items-center mt-5;\n        span {\n          @apply flex flex-row items-center text-xs;\n          input {\n            @apply mr-1;\n          }\n        }\n        a {\n          @apply text-xs;\n        }\n      }\n    }\n  }\n</style>\n","\n  import { defineComponent, onMounted, ref, computed } from 'vue';\n  import { useDesign } from '@/hooks/useDesign';\n  import { getMsgListApi, setMsgReadApi } from '@/api/trade/msssage';\n  import { dataFormate } from '@/helper/utils';\n  const DISPLAY_NYM = 10;\n  export default defineComponent({\n    name: 'messageLists',\n    setup() {\n      const { prefixCls } = useDesign('message');\n      const hideRead = ref(false);\n      const totalCount = ref(0);\n      const lists = ref([]);\n      const filterList = computed(() => {\n        if (!hideRead.value) return lists.value;\n        return lists.value.filter((item: any) => !item.status);\n      });\n      function updateCurrentPage(page) {\n        fetchMsgList(page);\n      }\n      async function handleRead(msgId) {\n        try {\n          const result = await setMsgReadApi({ mid: msgId });\n          lists.value.map((item: any) => (item.status = 1));\n        } catch (error) {\n          console.error(error);\n        }\n      }\n      async function fetchMsgList(page) {\n        try {\n          const result = await getMsgListApi({ page, limit: DISPLAY_NYM });\n          lists.value = result.list;\n          totalCount.value = result.total;\n        } catch (error) {\n          console.error(error);\n        }\n      }\n      onMounted(() => {\n        fetchMsgList(0);\n      });\n      return {\n        prefixCls,\n        updateCurrentPage,\n        hideRead,\n        DISPLAY_NYM,\n        totalCount,\n        filterList,\n        dataFormate,\n      };\n    },\n  });\n","import { render } from \"./MessageListAll.vue?vue&type=template&id=ef2f1446&scoped=true\"\nimport script from \"./MessageListAll.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageListAll.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageListAll.vue?vue&type=style&index=0&id=ef2f1446&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ef2f1446\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MessageListAll.vue?vue&type=style&index=0&id=ef2f1446&lang=less&scoped=true\""],"sourceRoot":""}